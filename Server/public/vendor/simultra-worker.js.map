{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 2156daa3ffa0d1ef2a39","webpack:///./src/simultra-worker.js","webpack:///./src/io/API.js","webpack:///./src/io/WebClient.js","webpack:///./~/extend/index.js"],"names":["SimWorker","API","self","START_SIMULATION","IS_RUNNING","STOP_SIMULATION","GET_VEHICLES","UPDATE_VEHICLES","GET_VEHICLE","vid","WS_VEHICLES","WS_VEHICLE","GET_PEDESTRIANS","UPDATE_PEDESTRIANS","GET_PEDESTRIAN","pid","WS_PEDESTRIANS","WS_PEDESTRIAN","baseUrl","wsBaseUrl","replace","map","type","scenario","_ajax","url","method","data","JSON","stringify","WebSocket","wsVehicle","wsPedestrian","WebClient","param","defaultParam","Promise","resolve","reject","toUpperCase","xhr","XMLHttpRequest","open","responseType","onload","status","response","Error","statusText","onerror","send"],"mappings":"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","file":"simultra-worker.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Simultra\"] = factory();\n\telse\n\t\troot[\"Simultra\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 2156daa3ffa0d1ef2a39\n **/","// import extend from 'extend';\nimport API from './io/API';\n\nconst SimWorker = {\n  API: API\n};\n\nexport default SimWorker;\nself.SimWorker = SimWorker;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/simultra-worker.js\n **/","/**\n * API Helper\n */\nimport WebClient from './WebClient';\n\n// --- API endpoint definitions\nconst START_SIMULATION = '/api/v1/start';\nconst IS_RUNNING = '/api/v1/isRunning';\nconst STOP_SIMULATION = '/api/v1/stop';\n\nconst GET_VEHICLES = '/api/v1/vehicles';\nconst UPDATE_VEHICLES = '/api/v1/vehicles';\nconst GET_VEHICLE = function(vid) { return '/api/v1/vehicles/' + vid; };\nconst WS_VEHICLES = '/api/v1/vehicles-ws';\nconst WS_VEHICLE = function(vid) { return '/api/v1/vehicles/' + vid + '/ws'; };\n\nconst GET_PEDESTRIANS = '/api/v1/pedestrians';\nconst UPDATE_PEDESTRIANS = '/api/v1/pedestrians';\nconst GET_PEDESTRIAN = function(pid) { return '/api/v1/pedestrians/' + pid; };\nconst WS_PEDESTRIANS = '/api/v1/pedestrians-ws';\nconst WS_PEDESTRIAN = function(pid) { return '/api/v1/pedestrians/' + pid + '/ws'; };\n// ---\n\nclass API extends WebClient {\n  constructor(baseUrl) {\n    super();\n    this.baseUrl = baseUrl;\n    this.wsBaseUrl = baseUrl.replace(/^https?:\\/\\//, 'ws://');\n  }\n\n  // --- Controller\n  startSimulation(map, type, scenario) {\n    return this._ajax({\n      url: this.baseUrl + START_SIMULATION,\n      method: 'post',\n      data: JSON.stringify({\n        map: map,\n        type: type,\n        scenario: scenario\n      })\n    });\n  }\n\n  isRunning() {\n    return this._ajax({\n      url: this.baseUrl + IS_RUNNING,\n      method: 'get'\n    });\n  }\n\n  stopSimulation() {\n    return this._ajax({\n      url: this.baseUrl + STOP_SIMULATION,\n      method: 'post'\n    });\n  }\n\n  // --- Vehicles\n  getVehicles() {\n    return this._ajax({\n      url: this.baseUrl + GET_VEHICLES,\n      method: 'get'\n    });\n  }\n\n  updateVehicles(data) {\n    return this._ajax({\n      url: this.baseUrl + UPDATE_VEHICLES,\n      method: 'put',\n      data: data\n    });\n  }\n\n  getVehicle(vid) {\n    return this._ajax({\n      url: this.baseUrl + GET_VEHICLE(vid),\n      method: 'get'\n    });\n  }\n\n  wsVehicles() {\n    return new WebSocket(this.wsBaseUrl + WS_VEHICLES);\n  }\n\n  wsVehicle(vid) {\n    return new WebSocket(this.wsBaseUrl + WS_VEHICLE(vid));\n  }\n\n  wsAllVehicles() {\n    return this.wsVehicle('all');\n  }\n  // ---\n\n  // --- Pedestrians\n  getPedestrians() {\n    return this._ajax({\n      url: this.baseUrl + GET_PEDESTRIANS,\n      method: 'get'\n    });\n  }\n\n  updatePedestrians(data) {\n    return this._ajax({\n      url: this.baseUrl + UPDATE_PEDESTRIANS,\n      method: 'put',\n      data: data\n    });\n  }\n\n  getPedestrian(pid) {\n    return this._ajax({\n      url: this.baseUrl + GET_PEDESTRIAN(pid),\n      method: 'get'\n    });\n  }\n\n  wsPedestrians() {\n    return new WebSocket(this.wsBaseUrl + WS_PEDESTRIANS);\n  }\n\n  wsPedestrian(pid) {\n    return new WebSocket(this.wsBaseUrl + WS_PEDESTRIAN(pid));\n  }\n\n  wsAllPedestrians() {\n    return this.wsPedestrian('all');\n  }\n  // ---\n\n}\n\nexport default API;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/io/API.js\n **/","/**\n * Created by masayuki on 28/07/2016.\n */\nimport extend from 'extend';\n\nclass WebClient {\n  constructor() {\n\n  }\n\n  _ajax(param) {\n    var defaultParam = {\n      url: null,\n      method: 'GET',\n      data: null,\n      type: 'json'\n    };\n    param = extend({}, defaultParam, param);\n\n    return new Promise(function(resolve, reject) {\n      var method = param.method.toUpperCase();\n\n      var xhr = new XMLHttpRequest();\n      xhr.open(method, param.url);\n      xhr.responseType = param.type;\n\n      // set callbacks\n      xhr.onload = function() {\n        if (xhr.status === 200) {\n          resolve(xhr.response);\n        } else {\n          reject(Error(xhr.statusText));\n        }\n      };\n      xhr.onerror = function() {\n        reject(Error('Network Error'));\n      };\n\n      // send data if exists\n      if ((method === 'POST' || method === 'PUT') && param.data) {\n        xhr.send(param.data);\n      }\n      // or send the request without data\n      else {\n        xhr.send();\n      }\n    });\n  }\n\n}\n\nexport default WebClient;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/io/WebClient.js\n **/","'use strict';\n\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar toStr = Object.prototype.toString;\n\nvar isArray = function isArray(arr) {\n\tif (typeof Array.isArray === 'function') {\n\t\treturn Array.isArray(arr);\n\t}\n\n\treturn toStr.call(arr) === '[object Array]';\n};\n\nvar isPlainObject = function isPlainObject(obj) {\n\tif (!obj || toStr.call(obj) !== '[object Object]') {\n\t\treturn false;\n\t}\n\n\tvar hasOwnConstructor = hasOwn.call(obj, 'constructor');\n\tvar hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t// Not own constructor property must be Object\n\tif (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {\n\t\treturn false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own.\n\tvar key;\n\tfor (key in obj) {/**/}\n\n\treturn typeof key === 'undefined' || hasOwn.call(obj, key);\n};\n\nmodule.exports = function extend() {\n\tvar options, name, src, copy, copyIsArray, clone,\n\t\ttarget = arguments[0],\n\t\ti = 1,\n\t\tlength = arguments.length,\n\t\tdeep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === 'boolean') {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t} else if ((typeof target !== 'object' && typeof target !== 'function') || target == null) {\n\t\ttarget = {};\n\t}\n\n\tfor (; i < length; ++i) {\n\t\toptions = arguments[i];\n\t\t// Only deal with non-null/undefined values\n\t\tif (options != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = target[name];\n\t\t\t\tcopy = options[name];\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target !== copy) {\n\t\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {\n\t\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\t\tclone = src && isArray(src) ? src : [];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\t\ttarget[name] = extend(deep, clone, copy);\n\n\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t\t} else if (typeof copy !== 'undefined') {\n\t\t\t\t\t\ttarget[name] = copy;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/extend/index.js\n ** module id = 3\n ** module chunks = 0\n **/"],"sourceRoot":""}